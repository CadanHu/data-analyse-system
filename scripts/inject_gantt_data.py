import pymysql
import os
from datetime import datetime, timedelta

def inject_more_gantt_data():
    conn = pymysql.connect(
        host=os.getenv("MYSQL_HOST", "localhost"),
        user=os.getenv("MYSQL_USER", "root"),
        password=os.getenv("MYSQL_PASSWORD", "root"),
        port=int(os.getenv("MYSQL_PORT", 3306)),
        database="global_analysis",
        charset='utf8mb4',
        autocommit=True
    )
    cur = conn.cursor()
    
    print("ğŸš€ æ­£åœ¨æ³¨å…¥æ›´å¤šç”˜ç‰¹å›¾æµ‹è¯•æ•°æ®...")

    # æ¸…ç©ºæ—§æ•°æ®ä»¥ä¾¿é‡æ–°ç”Ÿæˆæ›´ä¸°å¯Œçš„
    cur.execute("TRUNCATE TABLE project_tasks")
    
    tasks = [
        # é¡¹ç›® Aï¼šç”µå•†ç³»ç»Ÿå‡çº§
        ('A-éœ€æ±‚åˆ†æ', '2025-01-01', '2025-01-10', 100),
        ('A-æ¶æ„è®¾è®¡', '2025-01-11', '2025-01-20', 100),
        ('A-UI/UXè®¾è®¡', '2025-01-15', '2025-01-30', 90),
        ('A-å‰ç«¯å¼€å‘-PCç«¯', '2025-02-01', '2025-03-10', 60),
        ('A-å‰ç«¯å¼€å‘-ç§»åŠ¨ç«¯', '2025-02-05', '2025-03-15', 45),
        ('A-åç«¯æ¥å£å¼€å‘', '2025-02-01', '2025-03-20', 75),
        ('A-æ•°æ®åº“ä¼˜åŒ–', '2025-03-01', '2025-03-10', 100),
        ('A-ç³»ç»Ÿé›†æˆæµ‹è¯•', '2025-03-21', '2025-04-05', 20),
        ('A-å®‰å…¨æ¼æ´æ‰«æ', '2025-04-01', '2025-04-07', 0),
        ('A-ç”¨æˆ·éªŒæ”¶æµ‹è¯•(UAT)', '2025-04-08', '2025-04-20', 0),
        ('A-æ­£å¼ä¸Šçº¿å‡†å¤‡', '2025-04-21', '2025-04-30', 0),
        
        # é¡¹ç›® Bï¼šAI åˆ†ææ’ä»¶å¼€å‘
        ('B-ç®—æ³•é¢„ç ”', '2025-02-10', '2025-02-28', 100),
        ('B-æ¨¡å‹è®­ç»ƒ', '2025-03-01', '2025-03-20', 80),
        ('B-APIå°è£…', '2025-03-15', '2025-03-25', 30),
        ('B-å‰ç«¯é›†æˆ', '2025-03-20', '2025-04-05', 10),
        ('B-æ€§èƒ½å‹åŠ›æµ‹è¯•', '2025-04-06', '2025-04-15', 0),
        
        # é¡¹ç›® Cï¼šæ•°æ®ä»“åº“è¿ç§»
        ('C-æºæ•°æ®å®¡è®¡', '2025-01-15', '2025-01-25', 100),
        ('C-ETLè„šæœ¬ç¼–å†™', '2025-01-26', '2025-02-15', 100),
        ('C-æ•°æ®è¿ç§»æ‰§è¡Œ', '2025-02-16', '2025-02-20', 100),
        ('C-æ•°æ®ä¸€è‡´æ€§æ ¡éªŒ', '2025-02-21', '2025-02-28', 95),
        ('C-æŠ¥è¡¨ç³»ç»Ÿé‡å®šå‘', '2025-03-01', '2025-03-05', 40)
    ]
    
    cur.executemany("INSERT INTO project_tasks (task_name, start_date, end_date, progress) VALUES (%s, %s, %s, %s)", tasks)

    print(f"âœ… æˆåŠŸæ³¨å…¥ {len(tasks)} æ¡å¤æ‚çš„ç”˜ç‰¹å›¾æµ‹è¯•æ•°æ®ã€‚")
    conn.close()

if __name__ == "__main__":
    inject_more_gantt_data()
